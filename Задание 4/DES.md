# Задание №4. Вариант №2
**Выполнили:** Лапеев Савелий, Машковцев Дмитрий, Новиков Егор. Команда DES

## 4.1 Задача о распределении инвестиций между проектами
Решаем методом динамического программирования

### Дано: Матрица прибыли

| $   | A  | B  | C  | D  |
|-----|----|----|----|----|
| 20  | 2  | 4  | 5  | 7  |
| 40  | 3  | 6  | 8  | 8  |
| 60  | 5  | 8  | 9  | 17 |
| 80  | 10 | 15 | 11 | 25 |
| 100 | 20 | 30 | 18 | 26 |

---

### Шаг 1. Проекты A и B

#### Инвестиции = 20
| A | B | Прибыль: $P_A + P_B$ |
|---|---|------------------------|
| 1 | 0 | \(2 + 0 = 2\) |
| 0 | **1** | \(0 + 4 = 4\) |

**MAX прибыль**$_{AB}(20) = 4$

#### Инвестиции = 40
| A | B | Прибыль: $P_A + P_B$ |
|---|---|------------------------|
| 2 | 0 | \(3 + 0 = 3\) |
| **1** | **1** | \(2 + 4 = 6) |
| 0 | 2 | \(0 + 6 = 6\) |

**MAX прибыль**$_{AB}(40) = 6$

#### Инвестиции = 60
| A | B | Прибыль: $P_A + P_B$ |
|---|---|------------------------|
| 3 | 0 | \(5 + 0 = 5\) |
| 2 | 1 | \(3 + 4 = 7\) |
| **1** | 2 | \(2 + 6 = 8\) |
| 0 | 3 | \(0 + 8 = 8\) |

**MAX прибыль**$_{AB}(60) = 8$

#### Инвестиции = 80
| A | B | Прибыль: $P_A + P_B$ |
|---|---|------------------------|
| 4 | 0 | \(10 + 0 = 10\) |
| 3 | 1 | \(5 + 4 = 9\) |
| 2 | 2 | \(3 + 6 = 9\) |
| 1 | 3 | \(2 + 8 = 10\) |
| 0 | **4** | \(0 + 15 = 15\) |

**MAX прибыль**$_{AB}(80) = 15$

#### Инвестиции = 100
| A | B | Прибыль: $P_A + P_B$ |
|---|---|------------------------|
| 5 | 0 | \(20 + 0 = 20\) |
| 4 | 1 | \(10 + 4 = 14\) |
| 3 | 2 | \(5 + 6 = 11\) |
| 2 | 3 | \(3 + 8 = 11\) |
| 1 | 4 | \(2 + 15 = 17\) |
| 0 | **5** | \(0 + 30 = 30\) |

**MAX прибыль**$_{AB}(100) = 30$

---

### Шаг 2. Проекты A, B и C

#### Инвестиции = 20
| AB | C | Прибыль: $P_{AB} + P_C$ |
|----|---|---------------------------|
| 1  | 0 | \(4 + 0 = 4\) |
| 0  | **1** | \(0 + 5 = 5\) |

**MAX прибыль**$_{ABC}(20) = 5$

#### Инвестиции = 40
| AB | C | Прибыль: $P_{AB} + P_C$ |
|----|---|---------------------------|
| 2  | 0 | \(6 + 0 = 6\) |
| **1**  | 1 | \(4 + 5 = 9\) |
| 0  | 2 | \(0 + 8 = 8\) |

**MAX прибыль**$_{ABC}(40) = 9$

#### Инвестиции = 60
| AB | C | Прибыль: $P_{AB} + P_C$ |
|----|---|---------------------------|
| 3  | 0 | \(8 + 0 = 8\) |
| 2  | 1 | \(6 + 5 = 11\) |
| **1**  | 2 | \(4 + 8 = 12\) |
| 0  | 3 | \(0 + 9 = 9\) |

**MAX прибыль**$_{ABC}(60) = 12$

#### Инвестиции = 80
| AB | C | Прибыль: $P_{AB} + P_C$ |
|----|---|---------------------------|
| **4**  | 0 | \(15 + 0 = 15\) |
| 3  | 1 | \(8 + 5 = 13\) |
| 2  | 2 | \(6 + 8 = 14\) |
| 1  | 3 | \(4 + 9 = 13\) |
| 0  | 4 | \(0 + 11 = 11\) |

**MAX прибыль**$_{ABC}(80) = 15$

#### Инвестиции = 100
| AB | C | Прибыль: $P_{AB} + P_C$ |
|----|---|---------------------------|
| **5**  | 0 | \(30 + 0 = 30\) |
| 4  | 1 | \(15 + 5 = 20\) |
| 3  | 2 | \(8 + 8 = 16\) |
| 2  | 3 | \(6 + 9 = 15\) |
| 1  | 4 | \(4 + 11 = 15\) |
| 0  | 5 | \(0 + 18 = 18\) |

**MAX прибыль**$_{ABC}(100) = 30$

---

### Шаг 3. Проекты A, B, C и D

#### Инвестиции = 100
| ABC | D | Прибыль: $P_{ABC} + P_D$ |
|-----|---|----------------------------|
| **5**  | 0 | \(30 + 0 = 30\) |
| 4  | 1 | \(15 + 7 = 22\) |
| 3  | 2 | \(12 + 8 = 20\) |
| 2  | 3 | \(9 + 17 = 26\) |
| **1**  | 4 | \(5 + 25 = 30\) |
| 0  | 5 | \(0 + 26 = 26\) |

**MAX прибыль**$_{ABCD}(100) = 30$

---

### Финальная таблица

| у.е. | AB  | ABC | ABCD |
|------|-----|-----|------|
| 20   | 4 (0/1) | 5 (0/1) | - |
| 40   | 6 (1/1) | 9 (1/1) | - |
| 60   | 8 (1/2) | 12 (1/2) | - |
| 80   | 15 (0/4) | 15 (4/0) | - |
| 100  | 30 (0/5) | 30 (5/0) | 30 (5/0) или (1/4) |

### Оптимальное распределение

Из расчётов следует два оптимальных распределения:
1. **Проект B: 100**, остальные проекты: 0.
2. **Проект C: 20, Проект D: 80**, остальные проекты: 0.

Выбираем первое распределение.

| Проект | Инвестиции (у.е.) |
|--------|-------------------|
| A      | 0                 |
| B      | 100               |
| C      | 0                 |
| D      | 0                 |

## Ответ:


* **Максимальная сумма прибыли от инвестиций:** $\mathbf{30}$ у.е.
* **Оптимальное распределение инвестиций:**
    * **Проект A:** 0 у.е.
    * **Проект B:** 100 у.е.
    * **Проект C:** 0 у.е.
    * **Проект D:** 0 у.е.

---

## 4.2 Конвейерная задача
Решаем задачу по алгоритму Джонсона

### Дано:

9 независимых заданий. Длительности (первый этап \(a_i\), второй этап \(b_i\)):

| Задание | \(a_i\) | \(b_i\) |
|---------|---------|---------|
| 1       | 3       | 4       |
| 2       | 6       | 5       |
| 3       | 6       | 7       |
| 4       | 11      | 11      |
| 5       | 3       | 2       |
| 6       | 2       | 1       |
| 7       | 4       | 3       |
| 8       | 10      | 11      |
| 9       | 8       | 9       |

### Решение по алгоритму Джонсона

#### 1. Разделение на группы

**Группа 1 \(aᵢ ≤ bᵢ):** задания, где время на первом этапе не больше времени на втором этапе.

Проверяем:
- Задание 1: \(3≤4\) → **ДА** (группа 1)
- Задание 2: \(6≤5\) → НЕТ
- Задание 3: \(6≤7\) → **ДА** (группа 1)
- Задание 4: \(11≤11\) → **ДА** (группа 1)
- Задание 5: \(3≤2\) → НЕТ
- Задание 6: \(2≤1\) → НЕТ
- Задание 7: \(4≤3\) → НЕТ
- Задание 8: \(10≤11\) → **ДА** (группа 1)
- Задание 9: \(8≤9\) → **ДА** (группа 1)

**Группа 1:** задания 1, 3, 4, 8, 9.

**Группа 2 (\(a_i > b_i\)):** оставшиеся задания.

**Группа 2:** задания 2, 5, 6, 7.

#### 2. Сортировка групп

**Группа 1:** сортируем по возрастанию \(a_i\).
Исходный порядок: 1(3), 3(6), 4(11), 8(10), 9(8).
Сортировка по \(a_i\): 1 (3), 3 (6), 9 (8), 8 (10), 4 (11).

**Группа 2:** сортируем по убыванию \(b_i\).
Исходный порядок: 2(5), 5(2), 6(1), 7(3).
Сортировка по убыванию \(b_i\): 2 (b=5), 7 (b=3), 5 (b=2), 6 (b=1).

#### 3. Формирование итогового порядка

Сначала выполняем задания из Группы 1 в отсортированном порядке, затем задания из Группы 2 в отсортированном порядке.

**Итоговый порядок:** 1 → 3 → 9 → 8 → 4 → 2 → 7 → 5 → 6.

#### 4. Построение расписания

##### Работник A (первый этап):
- Задание 1: время 0–3
- Задание 3: время 3–9 (3+6)
- Задание 9: время 9–17 (9+8)
- Задание 8: время 17–27 (17+10)
- Задание 4: время 27–38 (27+11)
- Задание 2: время 38–44 (38+6)
- Задание 7: время 44–48 (44+4)
- Задание 5: время 48–51 (48+3)
- Задание 6: время 51–53 (51+2)

##### Работник B (второй этап):
- Задание 1: начало в max(3, 0)=3, окончание в 3+4=7
- Задание 3: начало в max(9, 7)=9, окончание в 9+7=16
- Задание 9: начало в max(17, 16)=17, окончание в 17+9=26
- Задание 8: начало в max(27, 26)=27, окончание в 27+11=38
- Задание 4: начало в max(38, 38)=38, окончание в 38+11=49
- Задание 2: начало в max(44, 49)=49, окончание в 49+5=54
- Задание 7: начало в max(48, 54)=54, окончание в 54+3=57
- Задание 5: начало в max(51, 57)=57, окончание в 57+2=59
- Задание 6: начало в max(53, 59)=59, окончание в 59+1=60

#### 5. Расчет длительности

Работник A заканчивает в момент времени 53.  
Работник B заканчивает в момент времени 60.

**Общая длительность расписания: 60 единиц времени.**

#### 6. Диаграмма Ганта

```mermaid
gantt
    title Диаграмма Ганта для оптимального расписания (вариант 2)
    dateFormat  s
    axisFormat %S
    
    section Работник A
    Задание 1 :a1, 0, 3s
    Задание 3 :a3, after a1, 6s
    Задание 9 :a9, after a3, 8s
    Задание 8 :a8, after a9, 10s
    Задание 4 :a4, after a8, 11s
    Задание 2 :a2, after a4, 6s
    Задание 7 :a7, after a2, 4s
    Задание 5 :a5, after a7, 3s
    Задание 6 :a6, after a5, 2s
    
    section Работник B
    Задание 1 :b1, after a1, 4s
    Задание 3 :b3, after b1, 7s
    Задание 9 :b9, after b3, 9s
    Задание 8 :b8, after b9, 11s
    Задание 4 :b4, after b8, 11s
    Задание 2 :b2, after b4, 5s
    Задание 7 :b7, after b2, 3s
    Задание 5 :b5, after b7, 2s
    Задание 6 :b6, after b5, 1s
