# Задание №4. Вариант №6

## 4.1 Задача о распределении инвестиций между проектами

## Дано: Матрица прибыли

| $\$$ | A | B | C | D |
| :---: | :---: | :---: | :---: | :---: |
| 50 | 9 | 7 | 8 | 11 |
| 100 | 13 | 10 | 11 | 14 |
| 150 | 18 | 14 | 15 | 17 |
| 200 | 20 | 15 | 17 | 18 |
| 250 | 22 | 18 | 20 | 21 |

---

## 2. Расчёт максимальной прибыли 

### Шаг 2.1. Проекты A и B 

#### 1) Инвестиции = 50
| A | B | Прибыль: $P_A + P_B$ |
| :---: | :---: | :---: |
| 5 | 0 | $9$ |
| 0 | 5 | $7$ |
$$\mathbf{MAX\ прибыль_{AB}(50) = 9}$$

#### 2) Инвестиции = 100
| A | B | Прибыль: $P_A + P_B$ |
| :---: | :---: | :---: |
| 10 | 0 | $13$ |
| 5 | 5 | $9+ 7 = \mathbf{16}$ |
| 0 | 10 | $10$ |
$$\mathbf{MAX\ прибыль_{AB}(100) = 16}$$

#### 3) Инвестиции = 150
| A | B | Прибыль: $P_A + P_B$ |
| :---: | :---: | :---: |
| 15 | 0 | $18$ |
| 10 | 5 | $13 + 7 = 20$ |
| 5 | 10 | $9 + 10 = 19$ |
| 0 | 15 | $14$ |
$$\mathbf{MAX\ прибыль_{AB}(150) = 20}$$

#### 4) Инвестиции = 200
| A | B | Прибыль: $P_A + P_B$ |
| :---: | :---: | :---: |
| 20 | 0 | $20$ |
| 15 | 5 | $18+7 = 25$ |
| 10 | 10 | $13+10 = 23$ |
| 5 | 15 | $9 + 14 = 23$ |
| 0 | 20 | $16$ |
$$\mathbf{MAX\ прибыль_{AB}(200) = 25}$$

#### 5) Инвестиции = 250
| A | B | Прибыль: $P_A + P_B$ |
| :---: | :---: | :---: |
| 25 | 0 | $22$ |
| 20 | 5 | $20 + 7 = 27$ |
| 15 | 10 | $18+10 = 28$ |
| 10 | 15 | $13+14 = 27$ |
| 5 | 20 | $9+15 = 24$ |
| 0 | 25 | $18$ |
$$\mathbf{MAX\ прибыль_{AB}(250) = 28}$$

---
### Шаг 2.2. Проекты A, B и C

#### 1) Инвестиции = 50
| AB | C | Прибыль: $P_{AB} + P_C$ |
| :---: | :---: | :---: |
| 5 | 0 | $9$ |
| 0 | 5 | $8$ |
$$\mathbf{MAX\ прибыль_{ABC}(50) = 9}$$

#### 2) Инвестиции = 100
| AB | C | Прибыль: $P_{AB} + P_C$ |
| :---: | :---: | :---: |
| 10 | 0 | $16$ |
| 5 | 5 | $9+8 = 17$ |
| 0 | 10 | $11$ |
$$\mathbf{MAX\ прибыль_{ABC}(100) = 17}$$

#### 3) Инвестиции = 150
| AB | C | Прибыль: $P_{AB} + P_C$ |
| :---: | :---: | :---: |
| 15 | 0 | $20$ |
| 10 | 5 | $16 + 8 = 24$ |
| 5 | 10 | $9 + 11 = 20$ |
| 0 | 15 | $15$ |
$$\mathbf{MAX\ прибыль_{ABC}(150) = 24}$$

#### 4) Инвестиции = 200
| AB | C | Прибыль: $P_{AB} + P_C$ |
| :---: | :---: | :---: |
| 20 | 0 | $25$ |
| 15 | 5 | $20 + 8 = 28$ |
| 10 | 10 | $16 + 11 = 27$ |
| 5 | 15 | $9 + 10 = 19$ |
| 0 | 20 | $17$ |
$$\mathbf{MAX\ прибыль_{ABC}(200) = 28}$$

#### 5) Инвестиции = 250
| AB | C | Прибыль: $P_{AB} + P_C$ |
| :---: | :---: | :---: |
| 25 | 0 | $28$ |
| 20 | 5 | $25 + 8 = 33$ |
| 15 | 10 | $20 + 11 = 31$ |
| 10 | 15 | $16 + 15 = 31$ |
| 5 | 20 | $9 + 17 = 26$ |
| 0 | 25 | $20$ |
$$\mathbf{MAX\ прибыль_{ABC}(250) = 33}$$

---

### Шаг 2.3. Проекты A, B, C и D 

#### 1) Инвестиции = 250
| ABC | D | Прибыль: $P_{ABC} + P_D$ |
| :---: | :---: | :---: |
| 25 | 0 | $33$ |
| 20 | 5 | $28 + 11 = 39$ |
| 15 | 10| $24 + 14 = 38$ |
| 10 | 15 | $17 + 17 = 34$ |
| 5 | 20 | $9 + 17 = 26$ |
| 0 | 25 | $21$ |
$$\mathbf{MAX\ прибыль_{ABCD}(250) = 39}$$

---

## 3. Финальная таблица

| у.е. | AB | ABC | ABCD |
| :---: | :---: | :---: | :---: |
| **50** | 9 (1/0) | 9 (1/0) | - |
| **100** | 16 (1/1) | 17 (1/1) | - |
| **150** | 20 (2/1) | 24 (2/1) | - |
| **200** | 25 (3/1) | 28 (3/1) | - |
| **250** | 28 (3/2) | 33 (4/1) | 39 (4/1) |

В методе динамического программирования для задачи распределения инвестиций между несколькими проектами мы последовательно накапливаем результат, добавляя проекты по одному. На каждом шаге мы рассчитываем максимальную прибыль для всех возможных сумм инвестиций для уже рассмотренных проектов. Это необходимо для того, чтобы на следующем шаге использовать эти результаты.

Однако в финальном шаге (когда добавляется последний проект) нас интересует только целевой объём инвестиций (в этой задаче — 250 у.е.)*

---

## 4. Определение оптимального распределения

| Шаг | Текущая сумма | Проект | Инвестиция (у.е.) | Остаток |
| :---: | :---: | :---: | :---: | :---: |
| 1 | 250 | D | **50** | 200 |
| 2 | 200 | C | **50** | 150 |
| 3 | 150 | B | **50** | 100 |
| 4 | 100 | A | **100** | 0 |

## Ответ:

* **Максимальная сумма прибыли от инвестиций:** $\mathbf{39}$ у.е.
* **Оптимальное распределение инвестиций:**
    * **Проект A:** 100 у.е.
    * **Проект B:** 50 у.е.
    * **Проект C:** 50 у.е.
    * **Проект D:** 50 у.е.


## 4.2 Конвейерная задача
Решаем задачу по алгоритму Джонсона

## Дано:

| Задание | aᵢ  | bᵢ  |
|---------|----------------|-----------------|
| A       | 10              | 12               |
| B       | 3             | 2               |
| C       | 4              | 3               |
| D       | 2              | 3               |
| E       | 11              | 11               |
| F       | 9              | 10               |
| G       | 2             | 3              |
| H       | 7              | 6               |
| I       | 6             | 7              |
| J       | 5              | 4               |

## 1. Разделение на группы по убыванию и возрастанию с помощью алгоритма Джонсона

**Группа 1 (aᵢ ≤ bᵢ):** задания, где время на первом этапе ≤ времени на втором этапе

Группа 1: задания A(10,12), D(2,3), E(11,11), F(9,10), G(2,3), I(6,7)

**Группа 2 (aᵢ > bᵢ):** оставшиеся 

Группа 2: задания B(3,2), C(4,3), H(7,6), J(5,4)

## 2. Сортировка групп

**Группа 1:** сортируем по возрастанию aᵢ

D(2,3), G(2,3), I(6,7), F(9,10), A(10,12), E(11,11)

Порядок: D → G → I → F → A → E

**Группа 2:** сортируем по убыванию bᵢ

H(7,6), J(5,4), C(4,3), B(3,2)

Порядок: H → J → C → B

## 3. Формирование итогового порядка

**Итоговый порядок:** D → G → I → F → A → E → H → J → C → B

## 4. Построение расписания

### Работник A (первый этап):
- D: время 0-2
- G: время 2-4
- I: время 4-10
- F: время 10-19
- A: время 19-29
- E: время 29-40
- H: время 40-47
- J: время 47-52
- C: время 52-56
- B: время 56-59

### Работник B (второй этап):
- D: начинаем в 2, заканчиваем в 5
- G: начинаем в max(5, 4)=5, заканчиваем в 8
- I: начинаем в max(8, 10)=10, заканчиваем в 17
- F: начинаем в max(17, 19)=19, заканчиваем в 29
- A: начинаем в max(29, 29)= 29, заканчиваем в 41
- E: начинаем в max(41, 40)=41, заканчиваем в 52
- H: начинаем в max(52, 47)=52, заканчиваем в 58
- J: начинаем в max(58, 52)= 58, заканчиваем в 62
- C: начинаем в max(62, 56)= 62, заканчиваем в 65
- B: начинаем в max(65, 59)= 65, заканчиваем в 67

## 5. Расчет длительности

Работник A заканчивает в: 59

Работник B заканчивает в: 67

**Общая длительность расписания: 67 единиц времени**
```mermaid
gantt
    dateFormat  HH:mm
    axisFormat  %H:%M
    title Диаграмма Ганта (Конвейерная задача)
    
    section Станок 1
    D (2)           :active, s1d, 0, 2h
    G (2)           :active, s1g, after s1d, 2h
    I (6)           :active, s1i, after s1g, 6h
    F (9)           :active, s1f, after s1i, 9h
    A (10)          :active, s1a, after s1f, 10h
    E (11)          :active, s1e, after s1a, 11h
    H (7)           :active, s1h, after s1e, 7h
    J (5)           :active, s1j, after s1h, 5h
    C (4)           :active, s1c, after s1j, 4h
    B (3)           :active, s1b, after s1c, 3h

    section Станок 2
    Простой (0-2)   :done,   idle1, 0, 2h
    D (3)           :crit,   s2d, after s1d, 3h
    G (3)           :crit,   s2g, after s2d, 3h
    Простой (8-10)  :done,   idle2, after s2g, 2h
    I (7)           :crit,   s2i, after idle2, 7h
    Простой (17-19) :done,   idle3, after s2i, 2h
    F (10)          :crit,   s2f, after idle3, 10h
    A (12)          :crit,   s2a, after s2f, 12h
    E (11)          :crit,   s2e, after s2a, 11h
    H (6)           :crit,   s2h, after s2e, 6h
    J (4)           :crit,   s2j, after s2h, 4h
    C (3)           :crit,   s2c, after s2j, 3h
    B (2)           :crit,   s2b, after s2c, 2h

**Оптимальное расписание:** D → G → I → F → A → E → H → J → C → B

**Минимальная длительность:** 67 единиц времени
