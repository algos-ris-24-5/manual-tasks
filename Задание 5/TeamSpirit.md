# Задание №5 вариант 8 TeamSpirit
# Оптимальное расписание. Стратегия разделения процессоров (пятая модельная задача)

### Вариант 8:

| Задания      |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 54  |  37 |  35 |  25 | 19  |  17  |

| Исполнители           |  1  |  2  |  3  |  4  |
|:----------------------|:---:|:---:|:---:|:---:|
| Производительность(p) |  8  |  4  |  3  |  2  |

### Расчёт минимальной длительности расписания
Используя формулу подставим значения из таблиц:

$$  
T_{min} = \frac {54 + 37 + 35 + 25 + 19 + 17}{8 + 4 + 3 + 2} = 11
$$  


### Распределим приоритеты  на момент времени, где t = 0

Согласно стратегии разделения процессов, на каждом этапе самые мощные ресурсы направляеются на выполнение наиболее трудоёмких задач.

Для того, чтобы рассчитать в какой момент у работ сойдутся приоритеты мы приравняем A = B, B = C, C = D, D = E.

Проверка уравнений
---
1. $A=B$

   $54-8t = 37 - 4t$

   $54 - 37 = 8t - 4t$

   $17 = 4t$

   $t = 4,25 $
---

2. $B=C$

   $37 - 4t = 35 - 3t$
   
   $t = 2$

---
3. $C=D$

   $35 - 3t = 25 - 2t$  
   
   $10 = t$
   
   $t=10$
---
4. $D=E$

    $25 - 2t = 19 $

    $6 = 2t$

    $t = 3$

###  Расчет ёмкостей работ в прерывании 

Подставим получившееся время в уравнение каждой из работ, чтобы понять емкости каждой работы в момент времени $t=2$. 

$A: 54 - 8 * 2 = 38$

$B: 37 - 4 * 2 = 29$

$C: 35 - 3 * 2 = 29$

$D: 25 - 2 * 2 = 21$

$E :19$

$F : 17$

В момент времеи $t=2$
| Задания      |  A  |  B  |  C  |  D  |  E  | F |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 38  | 29  | 29  |  21 | 19  |  17 |
---
В этот момент времени распределение исполнителей меняется.

На задаче А остается исполнитель 1.

Задачи B и C имеют одинаковую длительность, поэтому мы назначаем на них наибольшее возможное количество исполнителей - 2: 2 и 3. 

И оставшегося исполнителя назначим на задачу D.

Чтобы избежать одновременной работы нескольких исполнителей над одной задачей, мы используем циклическую схему распределения. На данном этапе каждый ресурс закрепляется за каждой из двух работ на фиксированный период. Такая очередность позволяет эффективно суммировать мощности исполнителей, не нарушая правила единоличного выполнения задачи. В итоге получается, что исполнитель 2 сначала работает над задачей В, а потом над задачей С, а исполнитель 3 наоборот. Данная схема распределения будет и дальше использоваться в решении, однако не будет описана текстом.

### Проверка уравнений
---
1. $A=BC$

   $38-8t = 29 - t*(4+3)/2$

   $38 - 29 = 8t - 3,5t$

   $9 = 4,5t$

   $t = 2 $
---

2. $BC=D$

   $29 - 3,5t = 21-2t$
   
   $29 - 21 = 3,5t - 2t$

   $8 = 1,5t$
   
   $t = 16/3$

---
4. $D=E$

    $21 - 2t = 19 $

    $2 = 2t$

    $t = 1$

### Расчет ёмкостей работ в прерывании 

Подставим получившееся время в уравнение каждой из работ, чтобы понять емкости каждой работы в момент времени $t=3$.

$A: 38 - 8 * 1 = 30$

$BC: 29 - 3,5 * 1 = 25,5$

$D: 21 - 2 * 1 = 19$

$E: 19$

$F:17$

В момент времени $t=3$
| Задания      |  A  |  B  |  C  |  D  |  E  | F |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 30  | 25,5  | 25,5  |  19 | 19  |  17 |
---

В этот момент времени распределение исполнителей меняется.

На задаче А остается исполнитель 1.

Задачи B и C имеют одинаковую длительность, поэтому мы назначаем на них наибольшее возможное количество исполнителей - 2: 2 и 3. 

Задачи D и E имеют одинаковую длительность, поэтому мы назначаем на них наибольшее возможное количество исполнителей - 1: исполнитель 4. 

### Проверка уравнений
---
1. $A = BC$

   $30-8t = 25,5-t*(4+3)/2$

   $30-25,5 = 8t-3,5t$

   $4,5 = 4,5t$

   $t = 1$
---

2. $BC=DE$

   $25,5-t*(4+3)/2 = 19-t*(2/2)$
   
   $25,5-19 = 3,5t - t$
   
   $6,5 = 2,5t$

   $t = 2,6$

3. $DE = F$

   $19-t = 17$

   $19-17 = t$

   $t = 2$

### Расчет ёмкостей работ в прерывании 

Подставим получившееся время в уравнение каждой из работ, чтобы понять емкости каждой работы в момент времени $t=4$.  
$A: 30 - 8 * 1 = 22$


$BC: 25,5 - 3,5*1 = 22$

$DE:19-1=18$

$F:17$

В момент времеи $t=4$
| Задания      |  A  |  B  |  C  |  D  |  E  | F |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 22  | 22  | 22  |  18 | 18  |  17 |
---

В этот момент времени распределение исполнителей меняется.

Задачи A, B и C имеют одинаковую длительность, поэтому мы назначаем на них наибольшее возможное количество исполнителей - 3: 1, 2 и 3. 

Задачи D и E имеют одинаковую длительность, поэтому мы назначаем на них наибольшее возможное количество исполнителей - 1: исполнитель 4. 

### Проверка уравнений
---
1. $ABC = DE$

   $22 - t*(8+4+3)/3 = 18 - t*(2/2)$

   $22-18 = 5t - t$

   $4 = 4t$

   $t = 1$
---

2. $DE=F$

   $18 - t*(2/2) = 17$
   
   $18-17 = t$
   
   $t=1$

### Расчет ёмкостей работ в прерывании 

Подставим получившееся время в уравнение каждой из работ, чтобы понять емкости каждой работы в момент времени $t=5$.  
$ABC: 22 - 5 * 1 = 17$

$DE: 18 - 1 * 1 = 17$

$F: 17$

В момент времеи $t=5$
| Задания      |  A  |  B  |  C  |  D  |  E  | F |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 17  | 17  | 17  |  17 | 17  |  17 |
---

В этот момент времени распределение исполнителей меняется.

Все задачи имеют одинаковую длительность, поэтому на все задачи ставим всех исполнителей.

### Расчет оставшегося времени

$17 - t * (8+4+3+2)/6 = 0$

$t = 17 / (17/6)$

$t = 6$

---

```mermaid
gantt
    title Диаграмма Ганта по таблице заданий
    dateFormat HH
    axisFormat %H

    Начало выполнения работ : milestone, m1, 00, 0h

    section Исполнитель 1
    A :a1, 00, 4h
    A :a2, after a1, 0.333h
    B :a5, after a2, 0.333h
    C :a6, after a5, 0.334h
    A :a7, after a6, 1h
    B :a8, after a7, 1h
    C :a9, after a8, 1h
    D :a10, after a9, 1h
    E :a11, after a10, 1h
    F :a12, after a11, 1h

    section Исполнитель 2
    B :b1, 00, 2h
    B :b_1, after b1, 0.5h
    C :b2, after b_1, 0.5h
    B :b3, after b2, 0.5h
    C :b4, after b3, 0.5h
    B :b5, after b4, 0.333h
    C :b6, after b5, 0.333h
    A :b7, after b6, 0.334h
    B :b8, after b7, 1h
    C :b9, after b8, 1h
    D :b10, after b9, 1h
    E :b11, after b10, 1h
    F :b12, after b11, 1h
    A :b13, after b12, 1h

   section Исполнитель 3
    C :c1, 00, 2h
    C :c_1, after c1, 0.5h
    B :c2, after c_1, 0.5h
    C :c3, after c2, 0.5h
    B :c4, after c3, 0.5h
    C :c5, after c4, 0.333h
    A :c6, after c5, 0.333h
    B :c7, after c6, 0.334h
    C :c8, after c7, 1h
    D :c9, after c8, 1h
    E :c10, after c9, 1h
    F :c11, after c10, 1h
    A :c12, after c11, 1h
    B :c13, after c12, 1h

   section Исполнитель 4
    D :d1, 00, 3h
    D :d2, after d1, 0.5h
    E :d3, after d2, 0.5h
    D :d4, after d3, 0.5h
    E :d5, after d4, 0.5h
    D :d6, after d5, 1h
    E :d7, after d6, 1h
    F :d8, after d7, 1h
    A :d9, after d8, 1h
    B :d10, after d9, 1h
    C :d11, after d10, 1h


    Окончание выполнения работ : milestone, m2, 11, 0h
